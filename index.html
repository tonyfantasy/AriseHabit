<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Habit Tracker ‚Äî –ø—Ä–æ–∫–∞—á–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</title>
  <meta name="description" content="–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏ –ø—Ä–æ–∫–∞—á–∏–≤–∞–π—Ç–µ –µ–≥–æ, –≤—ã–ø–æ–ª–Ω—è—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ü–µ–ª–∏. –£—Ä–æ–≤–Ω–∏, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, —Å–µ—Ä–∏–∏.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ -->
  <div class="create-character-screen" id="createCharacterScreen">
    <div class="create-character-card game-panel">
      <div class="create-character-header">
        <span class="create-character-icon">‚öî</span>
        <h1>–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h1>
        <p>–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ ‚Äî –∏ –Ω–∞—á–Ω—ë–º –ø—Ä–æ–∫–∞—á–∫—É</p>
      </div>
      <form id="characterForm" class="create-character-form" action="javascript:void(0)">
        <label class="field">
          <span>–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</span>
          <input type="text" id="characterName" placeholder="–ö–∞–∫ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è?" required maxlength="30" autocomplete="off">
        </label>
        <label class="field">
          <span>–ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span>
          <input type="text" id="characterGoal" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –±–æ–ª—å—à–µ —ç–Ω–µ—Ä–≥–∏–∏, —Å–ø–æ–∫–æ–π–Ω–µ–µ" maxlength="80" autocomplete="off">
        </label>
        <button type="button" class="btn btn-primary btn-create" id="btnStartAdventure" data-action="start-adventure">–ù–∞—á–∞—Ç—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</button>
      </form>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø—Ä–æ–∫–∞—á–∫–∞) -->
  <div class="app app-game" id="mainApp" hidden>
    <header class="header game-header">
      <div class="header-character">
        <div class="character-avatar character-avatar-pixel" id="characterAvatar" aria-hidden="true"></div>
        <div class="header-character-info">
          <span class="character-name" id="headerCharacterName">–ü–µ—Ä—Å–æ–Ω–∞–∂</span>
          <div class="level-bar-wrap">
            <span class="level-label">–£—Ä. <strong id="characterLevel">1</strong></span>
            <div class="level-bar"><div class="level-bar-fill" id="levelBarFill"></div></div>
            <span class="level-xp" id="levelXpText">0 / 100 XP</span>
          </div>
        </div>
      </div>
      <div class="header-stats">
        <div class="stat-pill stat-streak" id="statStreak" title="–î–Ω–µ–π –ø–æ–¥—Ä—è–¥">
          <span class="stat-icon">üî•</span>
          <span id="streakCount">0</span>
        </div>
        <button type="button" class="btn btn-ghost btn-icon" id="btnNotifications" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
          <span class="icon">üîî</span>
          <span class="badge" id="notificationBadge">–í—ã–∫–ª</span>
        </button>
      </div>
    </header>

    <main class="main">
      <section class="game-panel game-stats" id="statsPanel">
        <h2 class="panel-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–Ω—è</h2>
        <div class="day-results-date" id="dayResultsDate"></div>
        <div class="day-results-list" id="dayResultsList"></div>
        <div class="day-results-average" id="dayResultsAverage"></div>
      </section>

      <section class="game-panel calendar-section" id="calendarSection">
        <h2 class="panel-title">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</h2>
        <div class="calendar-grid" id="calendarGrid"></div>
      </section>

      <section class="game-panel chart-section">
        <h2 class="panel-title">–ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –Ω–µ–¥–µ–ª—é</h2>
        <div class="chart-wrap">
          <canvas id="habitChart" aria-label="–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–∏–≤—ã—á–µ–∫"></canvas>
        </div>
        <div class="chart-legend" id="chartLegend"></div>
      </section>

      <section class="game-panel habits-section">
        <div class="section-header">
          <h2 class="panel-title">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã</h2>
          <button type="button" class="btn btn-primary btn-sm" id="btnAddHabit">+ –ö–≤–µ—Å—Ç</button>
        </div>
        <ul class="habits-list" id="habitsList"></ul>
      </section>

      <section class="game-panel achievements-section" id="achievementsSection">
        <h2 class="panel-title">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
        <div class="achievements-grid" id="achievementsGrid"></div>
      </section>

      <section class="game-panel mental-section" id="mentalSection">
        <h2 class="panel-title">–ú–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ</h2>
        <p class="mental-intro">–°–æ–≤–µ—Ç–Ω–∏–∫ –ø–æ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä–µ—Å—Å—É</p>
        <div class="mental-telegram-wrap">
          <div class="mental-chat" id="mentalChat"></div>
          <div class="mental-keyboard" id="mentalChoices"></div>
          <div class="mental-reply" id="mentalReply" style="display:none">
            <input type="text" id="mentalInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ" maxlength="300">
            <button type="button" class="btn btn-primary btn-sm" id="mentalSend">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
          </div>
        </div>
      </section>
    </main>

    <div class="modal-overlay" id="modalOverlay" hidden>
      <div class="modal game-panel" id="modal">
        <div class="modal-header">
          <h3 id="modalTitle">–ù–æ–≤—ã–π –∫–≤–µ—Å—Ç</h3>
          <button type="button" class="btn-close" id="btnCloseModal" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
        </div>
        <form id="habitForm">
          <input type="hidden" id="habitId">
          <label class="field">
            <span>–ù–∞–∑–≤–∞–Ω–∏–µ</span>
            <input type="text" id="habitName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–∏—Ç—å –≤–æ–¥—É" required maxlength="60">
          </label>
          <label class="field">
            <span>–¶–µ–ª—å (—Ä–∞–∑ –≤ –¥–µ–Ω—å)</span>
            <input type="number" id="habitTarget" min="1" max="99" value="1">
          </label>
          <div class="field">
            <span>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</span>
            <div id="remindersList" class="reminders-list"></div>
            <button type="button" class="btn btn-ghost btn-sm" id="btnAddReminder">+ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</button>
          </div>
          <div class="modal-actions">
            <button type="button" class="btn btn-ghost" id="btnCancel">–û—Ç–º–µ–Ω–∞</button>
            <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="core.js"></script>
  <script src="app.js"></script>
</body>
</html>
